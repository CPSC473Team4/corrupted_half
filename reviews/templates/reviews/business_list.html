{% extends "reviews/base.html" %}
{% load static %}
{% load querystring %}

{% block title %}Businesses{% endblock %}

{% block style_mod %}
padding-top: 60px;
padding-bottom: 40px;
{% endblock %}

{# add this to business cards: http://tympanus.net/codrops/2012/06/18/3d-thumbnail-hover-effects/ #}

{% block content %}

    <div class="container">
        {% for category in categories %}
        <span class="label {% if category.slug == selected_category %}label-info{% endif %}"><a href="{% querystring "category"=category.slug %}">{{ category.name }}</a></span>
        {% endfor %}

        <h2>Businesses</h2>
        {% if not geocoder_error %}

        {% include 'reviews/business_list.inc.html' %}


        <div class="row-fluid">
            <div class="pagination">
                <ul>
                    {% if businesses_page.has_previous %}
                    <li><a href="?page={{ businesses.previous_page_number }}">«</a></li>
                    {% else %}
                    <li class="disabled"><a href="#">«</a></li>
                    {% endif %}

                    {% for page in businesses_page.paginator.page_range %}

                    {% if page == businesses_page.number %}
                    <li class="active"><a href="#">{{ page }}</a></li>
                    {% else %}
                    <li><a href="?page={{ page }}">{{ page }}</a></li>
                    {% endif %}

                    {% endfor %}

                    {% if businesses_page.has_next %}
                    <li><a href="?page={{ businesses_page.next_page_number }}">»</a></li>
                    {% else %}
                    <li class="disabled"><a href="#">»</a></li>
                    {% endif %}
                </ul>
            </div>
        </div>

        {% else %}
        <div class="row-fluid">
            <div class="alert alert-error">
              <button type="button" class="close" data-dismiss="alert">&times;</button>
              <strong>Error:</strong> {{ geocoder_error }}
            </div>
        </div>
        {% endif %}
    </div>

{% endblock %}